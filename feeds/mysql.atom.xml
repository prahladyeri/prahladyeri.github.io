<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Prahlad Yeri's Blog - MySQL</title><link href="/" rel="alternate"></link><link href="/feeds/mysql.atom.xml" rel="self"></link><id>/</id><updated>2022-10-13T09:00:00+05:30</updated><subtitle>Educate and solve problems is my mantra. I'm skilled in web development and a quick learner, I also like blogging and contributing to open source.</subtitle><entry><title>[MySQL] Setting default date to current date</title><link href="/blog/2022/10/mysql-setting-default-date-to-current-date.html" rel="alternate"></link><published>2022-10-13T09:00:00+05:30</published><updated>2022-10-13T09:00:00+05:30</updated><author><name>Prahlad Yeri</name></author><id>tag:None,2022-10-13:/blog/2022/10/mysql-setting-default-date-to-current-date.html</id><summary type="html">&lt;p&gt;The most typical way people set default values to mysql date fields is by using the &lt;code&gt;CURRENT_TIMESTAMP&lt;/code&gt; constant as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="n"&gt;ledger_entries&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt; &lt;span class="n"&gt;auto_increment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;entry_date&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt; &lt;span class="k"&gt;CURRENT_TIMESTAMP&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will obviously work if you need both date and time parts in the value. But in â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;The most typical way people set default values to mysql date fields is by using the &lt;code&gt;CURRENT_TIMESTAMP&lt;/code&gt; constant as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="n"&gt;ledger_entries&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt; &lt;span class="n"&gt;auto_increment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;entry_date&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt; &lt;span class="k"&gt;CURRENT_TIMESTAMP&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will obviously work if you need both date and time parts in the value. But in most cases (like entry_date here), we only need the date part and would happily like to save that extra space. Even if you don't want to save extra space, you may want to use the &lt;code&gt;date&lt;/code&gt; data type for widget compatibility on the front-end . In few such situations, we prefer to use the &lt;code&gt;date&lt;/code&gt; mysql data type instead of &lt;code&gt;datetime&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The obvious constraint here is that you can't then use &lt;code&gt;CURRENT_TIMESTAMP&lt;/code&gt; as the default value to the newly added rows. Following isn't allowed in MySQL as no pre-defined constant (except &lt;code&gt;CURRENT_TIMESTAMP&lt;/code&gt;) is even permitted as a default value in the first place:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;entry_date datetime default CURRENT_DATE
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now what will you do in such situations? As stated in some stack overflow posts like &lt;a href="https://stackoverflow.com/q/20461030/849365"&gt;this&lt;/a&gt;, &lt;a href="https://stackoverflow.com/q/64756590/849365"&gt;this&lt;/a&gt; and &lt;a href="https://stackoverflow.com/q/36374335/849365"&gt;this one&lt;/a&gt;, a new (2018) MySQL version does allow a default date like this but I don't recommended this as the practice won't be compatible with universal MySQL installations or versions:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;CREATE TABLE INVOICE(
    INVOICEDATE DATE DEFAULT (CURRENT_DATE)
)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Another way to handle this is to write a trigger. When new rows are inserted to the table, you may want to set the value to &lt;code&gt;CURRENT_DATE&lt;/code&gt;. You may prefer this approach if you're already writing a trigger but it's a tad extra code and inefficiency to keep adding triggers just for this one need though.&lt;/p&gt;
&lt;p&gt;I felt the best way is to handle this at the application level, that's what I preferred to do when I came across this problem recently.&lt;/p&gt;
&lt;p&gt;Happy coding and let me know your experience with mysql date/time values in comments below.&lt;/p&gt;
&lt;p&gt;References:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/q/20461030/849365"&gt;https://stackoverflow.com/q/20461030/849365&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/q/64756590/849365"&gt;https://stackoverflow.com/q/64756590/849365&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/q/36374335/849365"&gt;https://stackoverflow.com/q/36374335/849365&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/q/168736/849365"&gt;https://stackoverflow.com/q/168736/849365&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="MySQL"></category><category term="PHP"></category></entry></feed>