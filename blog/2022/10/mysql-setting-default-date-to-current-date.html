<!DOCTYPE html>
<html lang="en">
<head>
  	<meta charset="utf-8" />
	<title>[MySQL] Setting default date to current date</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" property="og:description" content="The most typical way people set default values to mysql date fields is by using the CURRENT_TIMESTAMP constant as follows: create table ledger_entries ( id int(11) not null auto_increment, entry_date datetime default CURRENT_TIMESTAMP ); This will obviously work if you need both date and time parts in the value. But in …">
	<link rel="canonical" content="https://prahladyeri.github.io/blog/2022/10/mysql-setting-default-date-to-current-date.html" />
	<meta name="author" content="Prahlad Yeri">
	<link rel="stylesheet" href="/theme/css/app.css?v=1.10">
	<link rel="stylesheet" href="/theme/css/pygment.css">		
	<link rel="shortcut icon" type="image/x-icon" href="/uploads/py.png" />
	<link href="https://prahladyeri.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri's Blog Full Atom Feed" />
	<link href="https://prahladyeri.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Prahlad Yeri's Blog Full RSS Feed" />
	<link href="https://prahladyeri.github.io/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri's Blog Categories Atom Feed" />




    <meta name="tags" content="MySQL" />
    <meta name="tags" content="PHP" />

	
	<!-- fosstodon verify -->
	<a style='display:none'  rel="me" href="https://fosstodon.org/@prahladyeri">Fosstodon</a>
	<!-- mastodon verify -->
	<a style='display:none' rel="me" href="https://mastodon.social/@prahladyeri">Mastodon</a>
	
	<!-- pinterest verify -->
	<meta name="p:domain_verify" content="a57360faef2ee56807b63d62092a849a"/>
	
	<!-- twitter card meta data -->
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@prahladyeri" />
	<meta name="twitter:creator" content="@prahladyeri" />
		<meta name="twitter:url" content="https://prahladyeri.github.io/blog/2022/10/mysql-setting-default-date-to-current-date.html" />
		<meta name="twitter:title" content="[MySQL] Setting default date to current date" />
		<meta name="twitter:description" content="The most typical way people set default values to mysql date fields is by using the CURRENT_TIMESTAMP constant as follows: create table ledger_entries ( id int(11) not null auto_increment, entry_date datetime default CURRENT_TIMESTAMP ); This will obviously work if you need both date and time parts in the value. But in …" />
			<meta name="twitter:image" content="https://prahladyeri.github.io/uploads/code-php.jpeg" />
			<meta name="image" property="og:image" content="https://prahladyeri.github.io/uploads/code-php.jpeg">

	
	
</head>

<body>
<div id='header'>
<div class='text-center' >
	<h1 class='blog-title'>Prahlad Yeri</h1>
	<h4  class='blog-tagline'>Freelance Programmer and Writer</h4>
</div>

<div id='navBlock' class='text-center' >
	<a class="nav-link" href="/">Home</a> | 
	<a class="nav-link" href="/blog">Blog</a> | 
	<a class="nav-link" href="/portfolio">Portfolio</a> | 
	<a class="nav-link" href="https://github.com/prahladyeri/resume">Resume</a> | 
	<a class="nav-link" href="/hire-me">Hire Me</a>
	<br>
	Social:
	<a class="nav-link" href="https://twitter.com/prahladyeri">Twitter</a> | 
	<a class="nav-link" href="https://github.com/prahladyeri">Github</a> | 
	<a class="nav-link" href="https://www.linkedin.com/in/prahlad-yeri-243a5316">Linkedin</a> | 
	<a class="nav-link" href="https://prahladyeri.medium.com/">Medium</a> | 
	<a class="nav-link" href="https://www.quora.com/profile/Prahlad-Yeri">Quora</a>
	<br>
	Email: prahladyeri at yahoo dot com | 
	Feeds:
	<a class="nav-link" href="/feeds/all.rss.xml">RSS</a> | 
	<a class="nav-link" href="/feeds/all.atom.xml">ATOM</a>
</div>
</div>
<div id="main" class='row content '>
<div class='col w50 m-auto'>
<section id="content" class="body">
  <header>
	<h1 class='mt-4 mb-4 post-title'>[MySQL] Setting default date to current date</h1>
 
  </header>
  <footer class="post-info clearfix">
	<span class='float-left'>
    <time class="text-muted published" datetime="2022-10-13T09:00:00+05:30">2022-10-13</time>
    <div class="text-muted vcard author">
      By           <a class="url fn" href="https://prahladyeri.github.io/">Prahlad Yeri</a>
    </div>
	</span>
	<div class='float-right'>
    <div class="text-muted category text-right">
        Filed under <a href="https://prahladyeri.github.io/blog/category/mysql">MySQL</a>
    </div>
    <div class="text-muted tags">
		Tags
            <a href="https://prahladyeri.github.io/blog/tag/mysql">MySQL</a>
            <a href="https://prahladyeri.github.io/blog/tag/php">PHP</a>
    </div>
	</div>
  </footer><!-- /.post-info -->
  
  <div class="entry-content">
    <p>The most typical way people set default values to mysql date fields is by using the <code>CURRENT_TIMESTAMP</code> constant as follows:</p>
<div class="highlight"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="n">ledger_entries</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span> <span class="n">auto_increment</span><span class="p">,</span>
    <span class="n">entry_date</span> <span class="n">datetime</span> <span class="k">default</span> <span class="k">CURRENT_TIMESTAMP</span>
<span class="p">);</span>
</pre></div>


<p>This will obviously work if you need both date and time parts in the value. But in most cases (like entry_date here), we only need the date part and would happily like to save that extra space. Even if you don't want to save extra space, you may want to use the <code>date</code> data type for widget compatibility on the front-end . In few such situations, we prefer to use the <code>date</code> mysql data type instead of <code>datetime</code>.</p>
<p>The obvious constraint here is that you can't then use <code>CURRENT_TIMESTAMP</code> as the default value to the newly added rows. Following isn't allowed in MySQL as no pre-defined constant (except <code>CURRENT_TIMESTAMP</code>) is even permitted as a default value in the first place:</p>
<div class="highlight"><pre><span></span>entry_date datetime default CURRENT_DATE
</pre></div>


<p>Now what will you do in such situations? As stated in some stack overflow posts like <a href="https://stackoverflow.com/q/20461030/849365">this</a>, <a href="https://stackoverflow.com/q/64756590/849365">this</a> and <a href="https://stackoverflow.com/q/36374335/849365">this one</a>, a new (2018) MySQL version does allow a default date like this but I don't recommended this as the practice won't be compatible with universal MySQL installations or versions:</p>
<div class="highlight"><pre><span></span>CREATE TABLE INVOICE(
    INVOICEDATE DATE DEFAULT (CURRENT_DATE)
)
</pre></div>


<p>Another way to handle this is to write a trigger. When new rows are inserted to the table, you may want to set the value to <code>CURRENT_DATE</code>. You may prefer this approach if you're already writing a trigger but it's a tad extra code and inefficiency to keep adding triggers just for this one need though.</p>
<p>I felt the best way is to handle this at the application level, that's what I preferred to do when I came across this problem recently.</p>
<p>Happy coding and let me know your experience with mysql date/time values in comments below.</p>
<p>References:</p>
<ul>
<li><a href="https://stackoverflow.com/q/20461030/849365">https://stackoverflow.com/q/20461030/849365</a></li>
<li><a href="https://stackoverflow.com/q/64756590/849365">https://stackoverflow.com/q/64756590/849365</a></li>
<li><a href="https://stackoverflow.com/q/36374335/849365">https://stackoverflow.com/q/36374335/849365</a></li>
<li><a href="https://stackoverflow.com/q/168736/849365">https://stackoverflow.com/q/168736/849365</a></li>
</ul>
  </div><!-- /.entry-content -->

	<!-- Start: Prahlad -->
	<script>
	document.addEventListener('DOMContentLoaded', function(){
		console.log('DOMContentLoaded');
		var elems = document.querySelectorAll(".entry-content table");
		for(var i= 0;i<elems.length;i++) {
			if (!hasClass(elems[i], 'table')) addClass(elems[i], 'table');
			if (!hasClass(elems[i], 'table-bordered')) addClass(elems[i], 'table-bordered');
			if (!hasClass(elems[i], 'table-sm')) addClass(elems[i], 'table-sm');
		}
		document.querySelector(".entry-content img").parentElement.style.textAlign = "center";
	});
	</script>

	<!--start: adsense-->
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0428291735937735"
     crossorigin="anonymous"></script>
	<!-- prahladyeri.github.io -->
	<ins class="adsbygoogle"
		 style="display:block"
		 data-ad-client="ca-pub-0428291735937735"
		 data-ad-slot="9729062115"
		 data-ad-format="auto"
		 data-full-width-responsive="true"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
	<!--end: adsense-->
	
	
	
	<!-- End: Prahlad -->
</section>
</div>
<!-- <div id='push'></div> -->
</div>


<footer id ="footer" class="text-center">
<br>
Copyright (&copy;) 2014-2023 Prahlad Yeri. Build 1.10.<br>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
</footer>

<script>
function hasClass(ele,cls) {
  return !!ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

document.addEventListener('DOMContentLoaded', function() {
	//var hh = document.querySelector("#header").clientHeight;
	//var fh = document.querySelector("#footer").clientHeight;
	//document.querySelector("#main").style.height = "calc(100vh - " + (hh + fh) + "px);"
});
</script>

</body>
</html>