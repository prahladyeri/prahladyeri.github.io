<!DOCTYPE html>
<html lang="en">
<head>
  	<meta charset="utf-8" />
	<title>The right way to serve static files when using django with gunicorn</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" property="og:description" content="Yesterday, I learned during deployment that your Django app when used in combination with gunicorn will refuse to serve static files, do whatever you may. I looked up almost every Stack Overflow answer post on this topic including this, this and this. I meddled with almost every hopeful setting including …">
	<link rel="canonical" content="https://prahladyeri.github.io/blog/2021/04/the-right-way-to-serve-static-files-when-using-django-with-gunicorn.html" />
	<meta name="author" content="Prahlad Yeri">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
	<link rel="stylesheet" href="/theme/css/app.css?v=1.1">
	<link rel="stylesheet" href="/theme/css/pygment.css">		
	<link rel="shortcut icon" type="image/x-icon" href="/uploads/py.png" />
	<link href="https://prahladyeri.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri's Blog Full Atom Feed" />
	<link href="https://prahladyeri.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Prahlad Yeri's Blog Full RSS Feed" />
	<link href="https://prahladyeri.github.io/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri's Blog Categories Atom Feed" />




    <meta name="tags" content="Django" />
    <meta name="tags" content="Gunicorn" />

	
	
	
	<!-- twitter card meta data -->
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@prahladyeri" />
	<meta name="twitter:creator" content="@prahladyeri" />
		<meta name="twitter:url" content="https://prahladyeri.github.io/blog/2021/04/the-right-way-to-serve-static-files-when-using-django-with-gunicorn.html" />
		<meta name="twitter:title" content="The right way to serve static files when using django with gunicorn" />
		<meta name="twitter:description" content="Yesterday, I learned during deployment that your Django app when used in combination with gunicorn will refuse to serve static files, do whatever you may. I looked up almost every Stack Overflow answer post on this topic including this, this and this. I meddled with almost every hopeful setting including …" />
			<meta name="twitter:image" content="https://prahladyeri.github.io/uploads/code.jpg" />
			<meta name="image" property="og:image" content="https://prahladyeri.github.io/uploads/code.jpg">

	
	
<!--pinterest claim-->
<meta name="p:domain_verify" content="eb43d46309e2766ef1b627cea2d19326"/>
</head>

<body>
<div class='text-center' >
	<h1 style='color:darkseagreen'>Prahlad Yeri</h1>
	<h4  style='color:grey;'>Freelance Programmer and Writer</h4>
</div>

<div id='navBlock' class='text-center' >
	<a class="nav-link" href="/">Home</a> | 
	<a class="nav-link" href="/blog">Blog</a> | 
	<a class="nav-link" href="/portfolio">Portfolio</a> | 
	<a class="nav-link" href="https://github.com/prahladyeri/resume">Resume</a> | 
	<a class="nav-link" href="/hire-me">Hire Me</a>
	<br>
	Social:
	<a class="nav-link" href="https://twitter.com/prahladyeri">Twitter</a> | 
	<a class="nav-link" href="https://github.com/prahladyeri">Github</a> | 
	<a class="nav-link" href="https://www.linkedin.com/in/prahlad-yeri-243a5316">Linkedin</a> | 
	<a class="nav-link" href="https://prahladyeri.medium.com/">Medium</a> | 
	<a class="nav-link" href="https://www.quora.com/profile/Prahlad-Yeri">Quora</a>
	<br>
	Email: prahladyeri at yahoo dot com | 
	Feeds:
	<a class="nav-link" href="/feeds/all.rss.xml">RSS</a> | 
	<a class="nav-link" href="/feeds/all.atom.xml">ATOM</a>
</div>

<div id="main" class='row content '>
<div class='col w50 m-auto'>
<section id="content" class="body">
  <header>
    <h1 class="entry-title">
      <span class="text-secondary" href="https://prahladyeri.github.io/blog/2021/04/the-right-way-to-serve-static-files-when-using-django-with-gunicorn.html" rel="bookmark" 
      title="Permalink to The right way to serve static files when using django with gunicorn">The right way to serve static files when using django with gunicorn</span></h1>
 
  </header>
  <footer class="post-info clearfix">
	<span class='float-left'>
    <time class="text-muted published" datetime="2021-04-19T09:55:00+05:30">Mon 19 April 2021</time>
    <div class="text-muted vcard author">
      By           <a class="url fn" href="https://prahladyeri.github.io/">Prahlad Yeri</a>
    </div>
	</span>
	<div class='float-right'>
    <div class="text-muted category text-right">
        Filed under <a href="https://prahladyeri.github.io/blog/category/python">Python</a>
    </div>
    <div class="text-muted tags">
		Tags
            <a href="https://prahladyeri.github.io/blog/tag/django">Django</a>
            <a href="https://prahladyeri.github.io/blog/tag/gunicorn">Gunicorn</a>
    </div>
	</div>
  </footer><!-- /.post-info -->
  
  <div class="entry-content">
    <p>Yesterday, I learned during deployment that your <code>Django</code> app when used in combination with <code>gunicorn</code> will refuse to serve static files, do whatever you may. I looked up almost every Stack Overflow answer post on this topic including <a href="https://stackoverflow.com/q/59857966/849365">this</a>, <a href="https://stackoverflow.com/q/54972837/849365">this</a> and <a href="https://stackoverflow.com/q/59857966/849365">this</a>.</p>
<p><img alt="python-source-code" src="/uploads/code.jpg"></p>
<p>I meddled with almost every hopeful setting including <code>STATICFILES_DIRS[]</code>, <code>STATIC_ROOT</code> and <code>STATIC_URL</code> but to no avail. Its as if Django is designed to refuse serving of static files when using <code>gunicorn</code> and that's what I started to suspect after everything failed.</p>
<p>And my suspicion was almost confirmed by <a href="https://stackoverflow.com/q/20175243/849365">this post</a> which says that:</p>
<blockquote>
<p>Gunicorn will only serve the dynamic content, i.e. the Django files</p>
</blockquote>
<p>But I know that's not strictly true because I've used Gunicorn with Flask in the past and it serves static files of your Flask app without any issues at all!</p>
<p>But then I thought that its better to handle static files using <code>nginx</code> anyway and since I was already using <code>nginx</code> as the front proxy on my server anyway, I thought of trying that post's suggestion. As mentioned, I added a new location section to my <code>nginx</code> configuration file as follows:</p>
<div class="highlight"><pre><span></span>location /static <span class="o">{</span>
        autoindex on<span class="p">;</span>
        <span class="nb">alias</span> /path/to/staticfiles<span class="p">;</span>
    <span class="o">}</span>
</pre></div>


<p>And that's exactly what worked! I bypassed <code>gunicorn</code> entirely and static files are now being served directly by the front server and I think this is a more efficient setup than having <code>gunicorn</code> serve the static files.</p>
<p>But why <code>gunicorn/django</code> refuse to serve static files directly still remain a mystery. I think the problem lies somewhere in Django and not gunicorn because as I said, I've seen gunicorn serve Flask static files before.</p>
  </div><!-- /.entry-content -->

	<!-- Start: Prahlad -->
	<script>
	$(document).ready(function(){
		$(".entry-content table").addClass("table table-bordered table-sm");
		$(".entry-content img").parent().css({'text-align': 'center'});
	});
	</script>

	<!--start: adsense-->
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0428291735937735"
     crossorigin="anonymous"></script>
	<!-- prahladyeri.github.io -->
	<ins class="adsbygoogle"
		 style="display:block"
		 data-ad-client="ca-pub-0428291735937735"
		 data-ad-slot="9729062115"
		 data-ad-format="auto"
		 data-full-width-responsive="true"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
	<!--end: adsense-->
	
	
	
	<!-- End: Prahlad -->
</section>
</div>
</div>


<footer id ="footer" class="col-md-12 text-center bg-dark text-white pt-1 pb-1 pl-1 pr-1">
Copyright (&copy;) 2014-2022 Prahlad Yeri. This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
</footer>

</body>
</html>