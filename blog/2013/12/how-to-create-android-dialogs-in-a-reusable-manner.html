<!DOCTYPE html>
<html lang="en">
<head>
  	<meta charset="utf-8" />
	<title>How to create android dialogs in a reusable manner</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" property="og:description" content="Creating dialogs is a very common need in your app to show a dialog box to the user in order to fetch a value, be it a mobile, desktop or even a web application. Furthermore, the values can range from anything like simple OK-Cancel dialog results to a list of …">
	<link rel="canonical" content="https://prahladyeri.github.io/blog/2013/12/how-to-create-android-dialogs-in-a-reusable-manner.html" />
	<meta name="author" content="Prahlad Yeri">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
	<link rel="stylesheet" href="/theme/css/app.css?v=1.0">
	<link rel="stylesheet" href="/theme/css/pygment.css">		
	<link rel="shortcut icon" type="image/x-icon" href="/uploads/py.png" />
	<link href="https://prahladyeri.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri's Blog Full Atom Feed" />
	<link href="https://prahladyeri.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Prahlad Yeri's Blog Full RSS Feed" />
	<link href="https://prahladyeri.github.io/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri's Blog Categories Atom Feed" />




    <meta name="tags" content="Android" />
    <meta name="tags" content="How To" />

	
	
	
	<!-- twitter card meta data -->
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@prahladyeri" />
	<meta name="twitter:creator" content="@prahladyeri" />
		<meta name="twitter:url" content="https://prahladyeri.github.io/blog/2013/12/how-to-create-android-dialogs-in-a-reusable-manner.html" />
		<meta name="twitter:title" content="How to create android dialogs in a reusable manner" />
		<meta name="twitter:description" content="Creating dialogs is a very common need in your app to show a dialog box to the user in order to fetch a value, be it a mobile, desktop or even a web application. Furthermore, the values can range from anything like simple OK-Cancel dialog results to a list of …" />
			<meta name="twitter:image" content="https://prahladyeri.github.io/uploads/cover.jpg" />
			<meta name="image" property="og:image" content="https://prahladyeri.github.io/uploads/cover.jpg">

	
	
<!--pinterest claim-->
<meta name="p:domain_verify" content="eb43d46309e2766ef1b627cea2d19326"/>
</head>

<body>
<div class='text-center' >
	<h1 style='color:darkseagreen'>Prahlad Yeri</h1>
	<h4  style='color:grey;'>Freelance Programmer and Writer</h4>
</div>

<div id='navBlock' class='text-center' >
	<a class="nav-link" href="/">Home</a> | 
	<a class="nav-link" href="/blog">Blog</a> | 
	<a class="nav-link" href="/portfolio">Portfolio</a> | 
	<a class="nav-link" href="https://github.com/prahladyeri/resume">Resume</a> | 
	<a class="nav-link" href="/hire-me">Hire Me</a>
	<br>
	Social:
	<a class="nav-link" href="https://twitter.com/prahladyeri">Twitter</a> | 
	<a class="nav-link" href="https://github.com/prahladyeri">Github</a> | 
	<a class="nav-link" href="https://www.linkedin.com/in/prahlad-yeri-243a5316">Linkedin</a> | 
	<a class="nav-link" href="https://prahladyeri.medium.com/">Medium</a> | 
	<a class="nav-link" href="https://www.quora.com/profile/Prahlad-Yeri">Quora</a>
	<br>
	Email: prahladyeri at yahoo dot com | 
	Feeds:
	<a class="nav-link" href="/feeds/all.rss.xml">RSS</a> | 
	<a class="nav-link" href="/feeds/all.atom.xml">ATOM</a>
</div>

<div id="main" class='row content '>
<div class='col w50 m-auto'>
<section id="content" class="body">
  <header>
    <h1 class="entry-title">
      <span class="text-secondary" href="https://prahladyeri.github.io/blog/2013/12/how-to-create-android-dialogs-in-a-reusable-manner.html" rel="bookmark" 
      title="Permalink to How to create android dialogs in a reusable manner">How to create android dialogs in a reusable manner</span></h1>
 
  </header>
  <footer class="post-info clearfix">
	<span class='float-left'>
    <time class="text-muted published" datetime="2013-12-01T04:55:00+05:30">Sun 01 December 2013</time>
    <div class="text-muted vcard author">
      By           <a class="url fn" href="https://prahladyeri.github.io/">Prahlad Yeri</a>
    </div>
	</span>
	<div class='float-right'>
    <div class="text-muted category text-right">
        Filed under <a href="https://prahladyeri.github.io/blog/category/java">Java</a>
    </div>
    <div class="text-muted tags">
		Tags
            <a href="https://prahladyeri.github.io/blog/tag/android">Android</a>
            <a href="https://prahladyeri.github.io/blog/tag/how-to">How To</a>
    </div>
	</div>
  </footer><!-- /.post-info -->
  
  <div class="entry-content">
    <p>Creating dialogs is a very common need in your app to show a dialog box to the user in order to fetch a value, be it a mobile, desktop or even a web application. Furthermore, the values can range from anything like simple <em>OK-Cancel</em> dialog results to a list of "check-able" values or even a date-range.<!--more--></p>
<p><a href="https://prahladyeri.github.io/uploads/old/droid-man.png"><img alt="droid-man" class="alignnone wp-image-209" height="70" src="/uploads/old/droid-man.png" width="60"></a></p>
<p>I experienced the need to create an android dialog for each one of those for showing reports in a recent android app project. Whilst the java api offers maximum flexibility in creating dialog interface elements, there is no ready-made method that can be called to get, say a result for a message-dialog like this:</p>
<div class="highlight"><pre><span></span>result = MessageBox.Show();
</pre></div>


<p>Other languages like C# and VB provide such methods to show modal dialog boxes that return values after waiting for a modal dialog. But unfortunately, there is no concept of "modal" in android. A thread cannot just sit idle waiting for input as the resources are too valuable for that. Instead, there is the concept of callbacks, so that instead of you waiting for the dialog to return, the method calls back a function reference you have passed it:</p>
<div class="highlight"><pre><span></span>AlertDialog.Builder builder=new AlertDialog.Builder(context);
builder.setTitle(&quot;Milk supply tracker&quot;);
builder.setMessage(message);
builder.setPositiveButton(&quot;Yes&quot;,listener);
builder.setNegativeButton(&quot;No&quot;,listener);
builder.create().show();
</pre></div>


<p>The listener here is the referece to a function that will be called when the Yes or No button will be clicked. This not only complicates your code, but makes it very difficult to reuse code for handling different situations like getting a selection from a range of values or getting a date/time range. To solve this problem, I created a separate java class called Dialog and added variations of ShowDialog() methods to handle each type of dialog:</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">Dialog</span>
<span class="p">{</span>
    <span class="kr">public</span> <span class="kr">static</span> <span class="k">void</span> <span class="nx">ShowMessageDialog</span><span class="p">(</span><span class="nx">Context</span> <span class="nx">context</span><span class="p">,</span> <span class="nb">String</span> <span class="nx">message</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">ShowDialog</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="nx">message</span><span class="p">,</span><span class="nx">MessageBoxType</span><span class="p">.</span><span class="nx">OKOnly</span><span class="p">,</span><span class="k">new</span> <span class="nb">String</span><span class="p">[]{},</span><span class="kc">false</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="kr">static</span> <span class="k">void</span> <span class="nx">ShowMessageDialog</span><span class="p">(</span><span class="nx">Context</span> <span class="nx">context</span><span class="p">,</span> <span class="nb">String</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">MessageBoxType</span> <span class="nx">type</span> <span class="p">,</span> <span class="nx">OnClickListener</span> <span class="nx">listener</span><span class="p">)</span>
     <span class="p">{</span>
         <span class="nx">ShowDialog</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="nx">message</span><span class="p">,</span><span class="nx">type</span><span class="p">,</span><span class="k">new</span> <span class="nb">String</span><span class="p">[]{},</span><span class="kc">false</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
     <span class="p">}</span>

    <span class="kr">public</span> <span class="kr">static</span> <span class="k">void</span> <span class="nx">ShowListDialog</span><span class="p">(</span><span class="nx">Context</span> <span class="nx">context</span><span class="p">,</span> <span class="nb">String</span> <span class="nx">message</span><span class="p">,</span> <span class="nb">String</span><span class="p">[]</span> <span class="nx">listItems</span><span class="p">,</span> <span class="kr">boolean</span> <span class="nx">isMultiChoice</span><span class="p">,</span> <span class="nx">OnClickListener</span> <span class="nx">listener</span><span class="p">)</span>
     <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">isMultiChoice</span><span class="p">)</span>
         <span class="nx">ShowDialog</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">MessageBoxType</span><span class="p">.</span><span class="nx">OkCancel</span> <span class="p">,</span> <span class="nx">listItems</span><span class="p">,</span> <span class="nx">isMultiChoice</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
     <span class="k">else</span>
         <span class="nx">ShowDialog</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">MessageBoxType</span><span class="p">.</span><span class="nx">OKOnly</span> <span class="p">,</span> <span class="nx">listItems</span><span class="p">,</span> <span class="nx">isMultiChoice</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span><span class="nx">listener</span><span class="p">);</span>
     <span class="p">}</span>

    <span class="kr">public</span> <span class="kr">static</span> <span class="k">void</span> <span class="nx">ShowDateDialog</span><span class="p">(</span><span class="nx">Context</span> <span class="nx">context</span><span class="p">,</span><span class="nb">String</span> <span class="nx">message</span><span class="p">,</span><span class="nx">OnDateSetListener</span> <span class="nx">listener</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">Calendar</span> <span class="nx">c</span><span class="o">=</span><span class="nx">Calendar</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">();</span>
        <span class="kr">int</span> <span class="nx">y</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">Calendar</span><span class="p">.</span><span class="nx">YEAR</span><span class="p">);</span>
        <span class="kr">int</span> <span class="nx">m</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">Calendar</span><span class="p">.</span><span class="nx">MONTH</span><span class="p">);</span>
        <span class="kr">int</span> <span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">Calendar</span><span class="p">.</span><span class="nx">DAY_OF_MONTH</span><span class="p">);</span>

        <span class="nx">DatePickerDialog</span> <span class="nx">dlg</span><span class="o">=</span><span class="k">new</span> <span class="nx">DatePickerDialog</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
        <span class="nx">dlg</span><span class="p">.</span><span class="nx">setTitle</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
        <span class="nx">dlg</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>


<p>As you can see, the ShowMessageDialog() accepts different parameters depending on whether a listener is required or not. ShowListDialog(), on the other hand passes an array of strings to create a dialog displaying a list of values from which a user may select. The isMultiChoice parameter tells whether a checkbox is required or not against each value in the select list. All this is actually implemented in the ShowDialog() private method, whereas the ShowDateDialog() has its own implementation. Here is the source for ShowDialog():</p>
<div class="highlight"><pre><span></span>private static void ShowDialog(Context context, String message, MessageBoxType type , String[] listItems, boolean isMultiChoice, OnClickListener listener,OnClickListener selectedItemListener)
{
    AlertDialog.Builder builder=new AlertDialog.Builder(context);

    if (listItems.length&gt;0 &amp;&amp; isMultiChoice==false)
    {
        CheckedItems=new ArrayList();//won&#39;t be used in this case.
        builder.setTitle(message);

        builder.setItems(listItems, selectedItemListener);
    }
    else if (listItems.length&gt;0 &amp;&amp; isMultiChoice==true)
    {
        CheckedItems=new ArrayList();
        builder.setTitle(message);

        builder.setMultiChoiceItems(listItems, null, new OnMultiChoiceClickListener() 
        {
            @Override
            public void onClick(DialogInterface dialog, int which, boolean checked) 
            {
                if (checked)
                    CheckedItems.add(which);
                else
                {
                    if (CheckedItems.contains(which))
                        CheckedItems.remove(which);
                }
            }
        });
    }
    else
    {
        builder.setTitle(&quot;Milk supply tracker&quot;);
        builder.setMessage(message);
    }

    if (listItems.length==0 || isMultiChoice)
    {
        switch(type)
        {
        case OKOnly:
            builder.setPositiveButton(&quot;OK&quot;,listener);
            break;
        case OkCancel:
            builder.setPositiveButton(&quot;OK&quot;,listener);
            builder.setNegativeButton(&quot;Cancel&quot;,listener);
            break;
        case YesNo:
            builder.setPositiveButton(&quot;Yes&quot;,listener);
            builder.setNegativeButton(&quot;No&quot;,listener);
            break;
        }           
    }

    builder.create().show();
}
</pre></div>


<p>So hopefully, this class should suffice all your needs related to showing a dialog on your android app. Here is a working example of how the ShowListDialog() is actually called with checkboxes on:</p>
<div class="highlight"><pre><span></span><span class="nt">selItems</span><span class="o">=</span><span class="nt">new</span> <span class="nt">String</span><span class="cp">[]</span><span class="p">{</span><span class="err">&quot;apples&quot;,&quot;oranges&quot;,&quot;grapes&quot;</span><span class="p">}</span><span class="o">;</span>
<span class="nt">Device</span><span class="p">.</span><span class="nc">ShowListDialog</span><span class="o">(</span><span class="nt">this</span><span class="o">,</span><span class="s2">&quot;Select a fruit&quot;</span> <span class="o">,</span><span class="nt">this</span><span class="p">.</span><span class="nc">selItems</span><span class="o">,</span> <span class="nt">true</span><span class="o">,</span> <span class="nt">new</span> <span class="nt">DialogInterface</span><span class="p">.</span><span class="nc">OnClickListener</span><span class="o">()</span> <span class="p">{</span>

        <span class="err">@Override</span>
        <span class="err">public</span> <span class="err">void</span> <span class="err">onClick(DialogInterface</span> <span class="err">dialog,</span> <span class="err">int</span> <span class="err">which)</span> 
        <span class="err">{</span>
            <span class="err">if</span> <span class="err">(which==DialogInterface.BUTTON_POSITIVE)</span>
            <span class="err">{</span>
                <span class="err">for(int</span> <span class="n">i</span><span class="p">:</span><span class="n">Device</span><span class="o">.</span><span class="n">CheckedItems</span><span class="p">)</span>
                <span class="n">Dialog</span><span class="o">.</span><span class="nf">ShowMessageDialog</span><span class="p">(</span><span class="n">ReportsActivity</span><span class="err">.</span><span class="n">this</span><span class="p">,</span> <span class="s2">&quot;selected:&quot;</span> <span class="o">+</span> <span class="n">selItems</span><span class="cp">[</span><span class="nx">i</span><span class="cp">]</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="err">}</span>
    <span class="err">}</span><span class="o">);</span>
<span class="err">}</span>
</pre></div>
  </div><!-- /.entry-content -->

	<!-- Start: Prahlad -->
	<script>
	$(document).ready(function(){
		$(".entry-content table").addClass("table table-bordered table-sm");
		$(".entry-content img").parent().css({'text-align': 'center'});
	});
	</script>

	<!--start: adsense-->
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0428291735937735"
     crossorigin="anonymous"></script>
	<!-- prahladyeri.github.io -->
	<ins class="adsbygoogle"
		 style="display:block"
		 data-ad-client="ca-pub-0428291735937735"
		 data-ad-slot="9729062115"
		 data-ad-format="auto"
		 data-full-width-responsive="true"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
	<!--end: adsense-->
	
	
	
	<!-- End: Prahlad -->
</section>
</div>
</div>


<footer id ="footer" class="col-md-12 text-center bg-dark text-white pt-1 pb-1 pl-1 pr-1">
Copyright (&copy;) 2014-2022 Prahlad Yeri. This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
</footer>

</body>
</html>