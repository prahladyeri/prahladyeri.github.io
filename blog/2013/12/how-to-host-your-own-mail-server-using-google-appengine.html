<!DOCTYPE html>
<html lang="en">
<head>
  	<meta charset="utf-8" />
	<title>How to host your own mail server using Google appengine</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" property="og:description" content="Google has an outstanding habit of bringing the power of elites to the masses. Firstly, they took over the world of smartphones with android, and now the buzzword everywhere is Google Appengine. Once you get the basics of GAE and start looking beyond your first HelloWorld application, you will start …">
	<link rel="canonical" content="https://prahladyeri.github.io/blog/2013/12/how-to-host-your-own-mail-server-using-google-appengine.html" />
	<meta name="author" content="Prahlad Yeri">
	<link rel="stylesheet" href="/theme/css/app.css?v=1.11">
	<link rel="stylesheet" href="/theme/css/pygment.css">		
	<link rel="shortcut icon" type="image/x-icon" href="/uploads/py.png" />
	<link href="https://prahladyeri.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri's Blog Full Atom Feed" />
	<link href="https://prahladyeri.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Prahlad Yeri's Blog Full RSS Feed" />
	<link href="https://prahladyeri.github.io/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Prahlad Yeri's Blog Categories Atom Feed" />




    <meta name="tags" content="Python" />
    <meta name="tags" content="Google App Engine" />
    <meta name="tags" content="How To" />

	
	<!-- fosstodon verify -->
	<a style='display:none'  rel="me" href="https://fosstodon.org/@prahladyeri">Fosstodon</a>
	<!-- mastodon verify -->
	<a style='display:none' rel="me" href="https://mastodon.social/@prahladyeri">Mastodon</a>
	
	<!-- pinterest verify -->
	<meta name="p:domain_verify" content="a57360faef2ee56807b63d62092a849a"/>
	
	<!-- twitter card meta data -->
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@prahladyeri" />
	<meta name="twitter:creator" content="@prahladyeri" />
		<meta name="twitter:url" content="https://prahladyeri.github.io/blog/2013/12/how-to-host-your-own-mail-server-using-google-appengine.html" />
		<meta name="twitter:title" content="How to host your own mail server using Google appengine" />
		<meta name="twitter:description" content="Google has an outstanding habit of bringing the power of elites to the masses. Firstly, they took over the world of smartphones with android, and now the buzzword everywhere is Google Appengine. Once you get the basics of GAE and start looking beyond your first HelloWorld application, you will start …" />
			<meta name="twitter:image" content="https://prahladyeri.github.io/uploads/cover.jpg" />
			<meta name="image" property="og:image" content="https://prahladyeri.github.io/uploads/cover.jpg">

	
	
</head>

<body>
<div id='header'>
<div class='text-center' >
	<h1 class='blog-title'>Prahlad Yeri</h1>
	<h4  class='blog-tagline'>Freelance Programmer and Writer</h4>
</div>

<div id='navBlock' class='text-center' >
	<a class="nav-link" href="/">Home</a> | 
	<a class="nav-link" href="/blog">Blog</a> | 
	<a class="nav-link" href="/portfolio">Portfolio</a> | 
	<a class="nav-link" href="https://github.com/prahladyeri/resume">Resume</a> | 
	<a class="nav-link" href="/hire-me">Hire Me</a>
	<br>
	Social:
	<a class="nav-link" href="https://twitter.com/prahladyeri">Twitter</a> | 
	<a class="nav-link" href="https://github.com/prahladyeri">Github</a> | 
	<a class="nav-link" href="https://www.linkedin.com/in/prahlad-yeri-243a5316">Linkedin</a> | 
	<a class="nav-link" href="https://prahladyeri.medium.com/">Medium</a> | 
	<a class="nav-link" href="https://www.quora.com/profile/Prahlad-Yeri">Quora</a>
	<br>
	Email: prahladyeri at yahoo dot com | 
	Feeds:
	<a class="nav-link" href="/feeds/all.rss.xml">RSS</a> | 
	<a class="nav-link" href="/feeds/all.atom.xml">ATOM</a>
</div>
</div>
<div id="main" class='row content '>
<div class='col w50 m-auto'>
<section id="content" class="body">
  <header>
	<h1 class='mt-4 mb-4 post-title'>How to host your own mail server using Google appengine</h1>
 
  </header>
  <footer class="post-info clearfix">
	<span class='float-left'>
    <time class="text-muted published" datetime="2013-12-30T21:23:00+05:30">2013-12-30</time>
    <div class="text-muted vcard author">
      By           <a class="url fn" href="https://prahladyeri.github.io/">Prahlad Yeri</a>
    </div>
	</span>
	<div class='float-right'>
    <div class="text-muted category text-right">
        Filed under <a href="https://prahladyeri.github.io/blog/category/python">Python</a>
    </div>
    <div class="text-muted tags">
		Tags
            <a href="https://prahladyeri.github.io/blog/tag/python">Python</a>
            <a href="https://prahladyeri.github.io/blog/tag/google-app-engine">Google App Engine</a>
            <a href="https://prahladyeri.github.io/blog/tag/how-to">How To</a>
    </div>
	</div>
  </footer><!-- /.post-info -->
  
  <div class="entry-content">
    <p>Google has an outstanding habit of bringing the power of elites to the masses. Firstly, they took over the world of smartphones with android, and now the buzzword everywhere is Google Appengine.<!--more--></p>
<p>Once you get the basics of GAE and start looking beyond your first <a href="/blog/2013/12/how-to-create-a-pythonic-app-in-google-app-engine/" title="How to create a Python app in Google App Engine">HelloWorld</a> application, you will start appreciating the sheer power it provides compared to other paid hosting providers. GAE provides you the ability to send mails from your app without paying a single penny. Only if your app starts exceeding the usage quotas, you will have to pay in order to continue using the services.</p>
<p>An application of the above is creating and hosting your own email server through your app. Below is a single python script which acts as an http mail server that can route your email requests. It also doubles up as a test server so you can test the hosted service by appending the "/test" subdirectory to the url. You may pass http POST requests to your app including fields like username, to, cc, subject etc. once you build this script and host your app in the google cloud.</p>
<div class="highlight"><pre><span></span><span class="c1">#main.py</span>
<span class="kn">import</span> <span class="nn">webapp2</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="kn">from</span> <span class="nn">google.appengine.api</span> <span class="kn">import</span> <span class="n">users</span><span class="p">,</span><span class="n">mail</span>

<span class="k">class</span> <span class="nc">TestPage</span><span class="p">(</span><span class="n">webapp2</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">body</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        &lt;form method=&quot;post&quot; action=&quot;http://your-app-id.appspot.com&quot;&gt;</span>
<span class="s2">        Full Name: &lt;input name=&quot;fullname&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        user: &lt;input name=&quot;username&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        to: &lt;input name=&quot;to&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        cc: &lt;input name=&quot;cc&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        bcc: &lt;input name=&quot;bcc&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        subject: &lt;input name=&quot;subject&quot; /&gt;&lt;br /&gt;</span>
<span class="s2">        body: &lt;textarea name=&quot;body&quot;&gt;&lt;/textarea&gt;&lt;br /&gt;</span>
<span class="s2">        &lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s2">        &lt;/form&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MainPage</span><span class="p">(</span><span class="n">webapp2</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#TODO: check if password is correct.</span>

        <span class="c1">#From will actually be a placeholder, since only your own appspotmail addresses would be allowed.</span>
        <span class="n">tfullname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fullname&#39;</span><span class="p">)</span>
        <span class="n">tusername</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
        <span class="n">tto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;to&#39;</span><span class="p">)</span>
        <span class="n">tcc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cc&#39;</span><span class="p">)</span>
        <span class="n">tbcc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bcc&#39;</span><span class="p">)</span>
        <span class="n">tsubject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;subject&#39;</span><span class="p">)</span>
        <span class="n">tbody</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>
        <span class="n">tattachment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;attachment&#39;</span><span class="p">)</span>
        <span class="n">send_mail</span><span class="p">(</span><span class="n">fullname</span><span class="o">=</span><span class="n">tfullname</span><span class="p">,</span><span class="n">username</span><span class="o">=</span><span class="n">tusername</span><span class="p">,</span><span class="n">to</span><span class="o">=</span><span class="n">tto</span><span class="p">,</span><span class="n">subject</span><span class="o">=</span><span class="n">tsubject</span><span class="p">,</span><span class="n">body</span><span class="o">=</span><span class="n">tbody</span><span class="p">,</span><span class="n">cc</span><span class="o">=</span><span class="n">tcc</span><span class="p">,</span><span class="n">bcc</span><span class="o">=</span><span class="n">tbcc</span><span class="p">,</span><span class="n">attachment</span><span class="o">=</span><span class="n">tattachment</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;success&quot;</span><span class="p">)</span>
        <span class="c1">#self.response.write(tto)</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#self.response.headers[&#39;Content-Type&#39;] = &#39;text/plain&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;your-app-id http mail service version 1.0.&lt;br /&gt;</span>
<span class="s2">        post vars:</span>
<span class="s2">        [password]</span>
<span class="s2">        [fullname]</span>
<span class="s2">        [username]</span>
<span class="s2">        [to]</span>
<span class="s2">        [cc]</span>
<span class="s2">        [bcc]</span>
<span class="s2">        [subject]</span>
<span class="s2">        [body]</span>
<span class="s2">        [attachment]</span>

<span class="s2">        &lt;br /&gt;</span>
<span class="s2">        &lt;br /&gt;</span>

<span class="s2">        &lt;a type=&quot;button&quot; href=&quot;test&quot;&gt;Click here for a demo&lt;/a&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">send_mail</span><span class="p">(</span><span class="n">fullname</span><span class="p">,</span><span class="n">username</span><span class="p">,</span><span class="n">to</span><span class="p">,</span><span class="n">subject</span><span class="p">,</span><span class="n">body</span><span class="p">,</span><span class="n">cc</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">bcc</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">attachment</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">sender</span><span class="o">=</span><span class="n">fullname</span> <span class="o">+</span> <span class="s2">&quot; &lt;&quot;</span> <span class="o">+</span> <span class="n">username</span> <span class="o">+</span> <span class="s2">&quot;@your-app-id.appspotmail.com&gt;&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">mail</span><span class="o">.</span><span class="n">EmailMessage</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">sender</span><span class="p">)</span>
    <span class="n">message</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">to</span>
    <span class="k">if</span> <span class="n">cc</span><span class="o">!=</span><span class="bp">None</span> <span class="ow">and</span> <span class="n">cc</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">message</span><span class="o">.</span><span class="n">cc</span><span class="o">=</span><span class="n">cc</span>
    <span class="k">if</span> <span class="n">bcc</span><span class="o">!=</span><span class="bp">None</span> <span class="ow">and</span> <span class="n">bcc</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">message</span><span class="o">.</span><span class="n">bcc</span> <span class="o">=</span> <span class="n">bcc</span>
    <span class="n">message</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="n">subject</span>
    <span class="n">message</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>
    <span class="n">message</span><span class="o">.</span><span class="n">send</span><span class="p">()</span>

<span class="n">application</span> <span class="o">=</span> <span class="n">webapp2</span><span class="o">.</span><span class="n">WSGIApplication</span><span class="p">([</span>
                                       <span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">MainPage</span><span class="p">),</span>
                                       <span class="p">(</span><span class="s1">&#39;/test&#39;</span><span class="p">,</span> <span class="n">TestPage</span><span class="p">)</span>
                                       <span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>


<p>So now, you may bid farewell to third party mail services like mail-chimp and others - since you have your own mail server.</p>
  </div><!-- /.entry-content -->

	<!-- Start: Prahlad -->
	<script>
	document.addEventListener('DOMContentLoaded', function(){
		console.log('DOMContentLoaded');
		var elems = document.querySelectorAll(".entry-content table");
		for(var i= 0;i<elems.length;i++) {
			if (!hasClass(elems[i], 'table')) addClass(elems[i], 'table');
			if (!hasClass(elems[i], 'table-bordered')) addClass(elems[i], 'table-bordered');
			if (!hasClass(elems[i], 'table-sm')) addClass(elems[i], 'table-sm');
		}
		document.querySelector(".entry-content img").parentElement.style.textAlign = "center";
	});
	</script>

	<!--start: adsense-->
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0428291735937735"
     crossorigin="anonymous"></script>
	<!-- prahladyeri.github.io -->
	<ins class="adsbygoogle"
		 style="display:block"
		 data-ad-client="ca-pub-0428291735937735"
		 data-ad-slot="9729062115"
		 data-ad-format="auto"
		 data-full-width-responsive="true"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
	<!--end: adsense-->
	
	
	
	<!-- End: Prahlad -->
</section>
</div>
<!-- <div id='push'></div> -->
</div>


<footer id ="footer" class="text-center">
<br>
Copyright (&copy;) 2014-2023 Prahlad Yeri. Build 1.11.<br>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
</footer>

<script>
function hasClass(ele,cls) {
  return !!ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

document.addEventListener('DOMContentLoaded', function() {
	//var hh = document.querySelector("#header").clientHeight;
	//var fh = document.querySelector("#footer").clientHeight;
	//document.querySelector("#main").style.height = "calc(100vh - " + (hh + fh) + "px);"
});
</script>

</body>
</html>